script(language='javascript')
  $(document).ready(function(){
    $("#current_url").val(document.location.href);
    
    function confirm_logout(callback){
      $("#logout_confirm_dialog").dialog({
        autoOpen: true,
        show: "blind",
        resizable: false,
        closeOnEscape: true,
        buttons: {
            "nope": function() { $(this).dialog("close"); },
            "sure": function() {
              callback.call();
              $(this).dialog("close");
            }
        }
      });
    };

    $("#logout").click(function(){
      confirm_logout(function(){
        self.location = 'http://localhost:3000/user/logout';
      });
    });

    $("input#email").autocomplete({
      source: ["thunderzhulei@gmail.com", "lay.zhu@aurorafeint.com"]
    });

    $("#category_nav").accordion({
      collapsible: true,
      active: 0
    });

  });

div#logout_confirm_dialog(title='need ya confirm', style="display: none") 
  |<p><span class='ui-icon ui-icon-alert' style="float:left; margin:0 7px 20px 0;"></span>sure ya wanna leave?</p>

div.lay-span-6.lay-page-bg.lay-side-ht.lay-corner-all.lay-last
  div.lay-margin-top-1
    if user == null
      div.ui-widget.ui-helper-clearfix.span-6
        form.lay-form(method='post', action='/user/login')
          fieldset
            legend login
            != messages()
            p
              label(for='email') account
              br
              input#email.text.lay-corner-all.span-5(type='text', name='email')
              br
            p
              label(for='password') password
              br
              input#password.text.lay-corner-all.span-5(type='password', name='password')
              br
            p
              input#current_url(type='hidden', name='current_url')
              //input.span-2(type='submit', value='login')
              button#login_button.ui-button.ui-widget.ui-state-default.ui-corner-all.ui-button-text-only(role='button')
                span.ui-button-text login
              a(href='/user/register_redirect') no account?
    else
      div.span-6
        p= user.name
        p= user.email
        p= user.id
        a#logout(href='javascript:void(0)') leave?

  div#category_nav.ui-accordion.ui-widget.ui-helper-reset.ui-accordion-icons.span-6.last(role='tablist')
    |<h4><a href='#'>java</a></h4>
    p hibernate1
    |<h4><a href='#'>javascript</a></h4>
    p jquery
